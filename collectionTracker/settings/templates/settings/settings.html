{% extends 'base_with_sidebar.html' %}
{% load static %}

{% block title %}
    Settings
{% endblock %}

{% block site_specific_css %}
    <!-- <link rel="stylesheet" href="{% static 'tracker/css/tracker.css' %}" type="text/css"> -->
{% endblock %}

{% block maincontent %}
    <div class="settings-container">
        <h1>Settings</h1>
        <p>Manage your account settings.</p>
        
        <form method="POST" action="{% url 'change_color_scheme' %}" id="color-scheme-form">
            {% csrf_token %}
            <h2>Color Scheme</h2>
            <label for="color_scheme">Select Color Theme:</label>
            <div class="custom-select">
                <div class="selected-option" id="selected-option">Select Theme</div>
                <div class="options-container">
                    <div class="option" data-value="spring">
                        Spring Theme
                        <div class="theme-swatches">
                            <div class="color-swatch" style="background-color: #7cb86d;"></div>
                            <div class="color-swatch" style="background-color: #5a8a4e;"></div>
                            <div class="color-swatch" style="background-color: #a869c5;"></div>
                            <div class="color-swatch" style="background-color: #eb8ccb;"></div>
                        </div>
                    </div>
                    <div class="option" data-value="summer">
                        Summer Theme
                        <div class="theme-swatches">
                            <div class="color-swatch" style="background-color: #1651cf;"></div>
                            <div class="color-swatch" style="background-color: #0d40af;"></div>
                            <div class="color-swatch" style="background-color: #2884cf;"></div>
                            <div class="color-swatch" style="background-color: #42abc0;"></div>
                        </div>
                    </div>
                    <div class="option" data-value="autumn">
                        Autumn Theme
                        <div class="theme-swatches">
                            <div class="color-swatch" style="background-color: #911313;"></div>
                            <div class="color-swatch" style="background-color: #792213;"></div>
                            <div class="color-swatch" style="background-color: #c75019;"></div>
                            <div class="color-swatch" style="background-color: #f38039;"></div>
                        </div>
                    </div>
                    <div class="option" data-value="winter">
                        Winter Theme
                        <div class="theme-swatches">
                            <div class="color-swatch" style="background-color: #6467fa;"></div>
                            <div class="color-swatch" style="background-color: #4e50de;"></div>
                            <div class="color-swatch" style="background-color: #9C8185;"></div>
                            <div class="color-swatch" style="background-color: #E5A4CB;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <input type="hidden" name="color_scheme" id="color_scheme">
            <button type="submit" class="button">Speichern</button>
        </form>
        <p>Currently active: {{ request.user.userprofile.color_scheme |capfirst }}</p>
    </div>
{% endblock %}

{% block js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const selectedOption = document.getElementById('selected-option');
        const optionsContainer = document.querySelector('.options-container');
        const optionsList = document.querySelectorAll('.option');

        selectedOption.addEventListener('click', () => {
            optionsContainer.classList.toggle('active');
        });

        optionsList.forEach(option => {
            option.addEventListener('click', () => {
                selectedOption.innerHTML = option.innerHTML;
                document.getElementById('color_scheme').value = option.getAttribute('data-value');
                optionsContainer.classList.remove('active');
            });
        });
    });
</script>
{% endblock %}
